/*  FORMULAIRES D'AUTHENTIFICATION  */
@use '../abstract/variables' as *;

//  CONTENEUR PRINCIPAL CENTR√â 
.auth-form-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: $spacing-md;
  
  // D√©calage vers le haut pour remonter la card
  padding-bottom: 20vh; // Plus d'espace en bas
  padding-top: 0; // Moins d'espace en haut
  
  // Background avec overlay pour lisibilit√©
  position: relative;
  
  &::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
    z-index: -1;
  }
}

//  CARD DE FORMULAIRE 
.auth-card {
  position: relative;
  max-width: 420px; // L√©g√®rement r√©duit pour la forme circulaire
  width: 100%;
  overflow: hidden;
  
  // Suppression du background et border classiques pour utiliser le SVG
  background: transparent;
  border: none;
  
  // Animation d'entr√©e
  animation: authCardSlideIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  
  // SVG de fond avec forme de tour de ch√¢teau circulaire
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    // SVG tour de ch√¢teau circulaire avec cr√©neaux qui se rejoignent - comme une tour d'√©chec
    background-image: url('data:image/svg+xml,<svg width="280" height="320" viewBox="0 0 280 320" xmlns="http://www.w3.org/2000/svg"><defs><radialGradient id="stoneGrad" cx="50%" cy="30%"><stop offset="0%" stop-color="%23d4941e"/><stop offset="100%" stop-color="%23cc7722"/></radialGradient></defs><circle cx="140" cy="160" r="120" fill="url(%23stoneGrad)" stroke="%238b3a3a" stroke-width="4"/><path d="M20 160 L20 145 L35 145 L35 130 L50 130 L50 145 L65 145 L65 130 L80 130 L80 145 L95 145 L95 130 L110 130 L110 145 L125 145 L125 130 L140 130 L140 145 L155 145 L155 130 L170 130 L170 145 L185 145 L185 130 L200 130 L200 145 L215 145 L215 130 L230 130 L230 145 L245 145 L245 130 L260 130 L260 145 L260 160 A120 120 0 0 1 20 160 Z" fill="%23cc7722" stroke="%238b3a3a" stroke-width="2"/><circle cx="140" cy="240" r="25" fill="%23654321" stroke="%238b3a3a" stroke-width="2"/></svg>');
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: center;
    z-index: -1;
    // Ajout de l'effet shadow pour donner du relief √† la tour
    filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.4)) drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2));
  }
  
  // Overlay semi-transparent pour le contenu - forme de tour circulaire avec cr√©neaux
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(248, 247, 244, 0.95);
    z-index: -1;
    // Forme de tour circulaire pour l'overlay - cr√©neaux en arc de cercle en haut
    clip-path: polygon(
      50% 10%, 48% 6%, 46% 6%, 44% 10%, 42% 6%, 40% 6%, 38% 10%, 36% 6%, 34% 6%, 32% 10%, 
      30% 6%, 28% 6%, 26% 10%, 24% 6%, 22% 6%, 20% 10%, 18% 6%, 16% 6%, 14% 10%, 
      12% 14%, 8% 18%, 5% 25%, 3% 35%, 3% 45%, 5% 55%, 8% 65%, 12% 72%, 16% 78%, 
      22% 83%, 30% 87%, 40% 90%, 50% 91%, 60% 90%, 70% 87%, 78% 83%, 84% 78%, 
      88% 72%, 92% 65%, 95% 55%, 97% 45%, 97% 35%, 95% 25%, 92% 18%, 88% 14%, 
      86% 10%, 84% 6%, 82% 6%, 80% 10%, 78% 6%, 76% 6%, 74% 10%, 72% 6%, 70% 6%, 68% 10%, 
      66% 6%, 64% 6%, 62% 10%, 60% 6%, 58% 6%, 56% 10%, 54% 6%, 52% 6%
    );
    backdrop-filter: blur(10px);
  }
  
  @keyframes authCardSlideIn {
    from {
      opacity: 0;
      transform: translateY(-30px) scale(0.9);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
}

//  EN-T√äTE DE LA CARD 
.auth-card-header {
  position: relative;
  color: $white;
  padding: $spacing-xl $spacing-lg $spacing-lg;
  text-align: center;
  z-index: 1;
  
  // Fond avec gradient qui suit la forme des cr√©neaux
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, $primary-color 0%, darken($primary-color, 10%) 100%);
    z-index: -1;
    // Forme avec cr√©neaux circulaires pour l'en-t√™te de la tour
    clip-path: polygon(
      50% 15%, 48% 10%, 46% 10%, 44% 15%, 42% 10%, 40% 10%, 38% 15%, 36% 10%, 34% 10%, 32% 15%, 
      30% 10%, 28% 10%, 26% 15%, 24% 10%, 22% 10%, 20% 15%, 18% 10%, 16% 10%, 14% 15%, 
      12% 20%, 8% 25%, 6% 35%, 6% 100%, 94% 100%, 94% 35%, 92% 25%, 88% 20%, 86% 15%, 
      84% 10%, 82% 10%, 80% 15%, 78% 10%, 76% 10%, 74% 15%, 72% 10%, 70% 10%, 68% 15%, 
      66% 10%, 64% 10%, 62% 15%, 60% 10%, 58% 10%, 56% 15%, 54% 10%, 52% 10%
    );
  }
  
  h3 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    margin-bottom: $spacing-sm;
  }
  
  // Ic√¥ne de ch√¢teau m√©di√©val
  &::after {
    content: 'üè∞';
    display: block;
    font-size: 1.8rem;
    margin-top: $spacing-xs;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  }
}

//  CORPS DE LA CARD 
.auth-card-body {
  padding: $spacing-lg $spacing-xl $spacing-xl;
  position: relative;
  z-index: 1;
  
  // Marges adapt√©es √† la forme rectangulaire de la porte
  margin: 0 $spacing-md;
  
  // Style des champs de formulaire
  .form-group, .mb-3 {
    margin-bottom: $spacing-lg;
    
    label {
      display: block;
      color: $text-color;
      font-weight: 600;
      margin-bottom: $spacing-sm;
      font-size: 0.95rem;
    }
    
    input[type="text"],
    input[type="email"], 
    input[type="password"] {
      width: 100%;
      padding: $spacing-md;
      border: 2px solid rgba($primary-color, 0.3);
      border-radius: 8px;
      background: rgba($white, 0.9);
      font-size: 1rem;
      transition: all 0.3s ease;
      
      &:focus {
        outline: none;
        border-color: $primary-color;
        box-shadow: 0 0 0 3px rgba($primary-color, 0.1);
        background: $white;
      }
      
      &::placeholder {
        color: rgba($text-color, 0.6);
      }
    }
  }
  
  // Style des checkboxes
  .form-check {
    display: flex;
    align-items: center;
    gap: $spacing-sm;
    
    input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: $primary-color;
    }
    
    label {
      margin-bottom: 0;
      font-size: 0.9rem;
      color: rgba($text-color, 0.8);
    }
  }
}

//  BOUTONS D'ACTION 
.auth-submit-btn {
  width: 100%;
  padding: $spacing-md $spacing-lg;
  background: linear-gradient(135deg, $primary-color 0%, darken($primary-color, 15%) 100%);
  color: $white;
  border: none;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  box-shadow: 0 4px 15px rgba($primary-color, 0.3);
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba($primary-color, 0.4);
    background: linear-gradient(135deg, lighten($primary-color, 5%) 0%, $primary-color 100%);
  }
  
  &:active {
    transform: translateY(0);
  }
}

//  LIENS DE NAVIGATION 
.auth-links {
  text-align: center;
  margin-top: $spacing-lg;
  padding-top: $spacing-lg;
  border-top: 1px solid rgba($primary-color, 0.2);
  
  p {
    margin: 0;
    color: rgba($text-color, 0.8);
    font-size: 0.95rem;
  }
  
  a {
    color: $primary-color;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
    
    &:hover {
      color: darken($primary-color, 15%);
      text-decoration: underline;
    }
  }
}

//  MESSAGES D'ERREUR ET SUCC√àS 
.auth-alert {
  padding: $spacing-md;
  border-radius: 8px;
  margin-bottom: $spacing-lg;
  border-left: 4px solid;
  
  &.alert-danger {
    background: rgba(#dc3545, 0.1);
    border-color: #dc3545;
    color: #721c24;
  }
  
  &.alert-success {
    background: rgba($tertiary-color, 0.1);
    border-color: $tertiary-color;
    color: darken($tertiary-color, 30%);
  }
}

//  RESPONSIVE 
@media (max-width: $tablet) {
  .auth-form-container {
    padding: $spacing-sm;
  }
  
  .auth-card {
    margin: $spacing-sm;
    max-width: none;
  }
  
  .auth-card-body {
    padding: $spacing-lg;
  }
}

@media (max-width: $mobile) {
  .auth-card-header {
    padding: $spacing-md;
    
    h3 {
      font-size: 1.3rem;
    }
  }
  
  .auth-card-body {
    padding: $spacing-md;
    
    .form-group, .mb-3 {
      margin-bottom: $spacing-md;
    }
  }
}

//  TH√àME DYSTOPIQUE 
.theme-dysto {
  .auth-card-header {
    background: linear-gradient(135deg, #ff6b35 0%, #e55d32 50%, #7209b7 100%);
    border-bottom-color: #7209b7;
    
    // Tour cyberpunk futuriste
    &::after {
      content: 'ÔøΩ';
      display: block;
      font-size: 1.8rem;
      margin-top: $spacing-xs;
      filter: drop-shadow(0 2px 4px rgba(114, 9, 183, 0.5)) drop-shadow(0 0 10px rgba(255, 107, 53, 0.3));
    }
  }
  
  // SVG tour cyberpunk circulaire avec effets n√©on
  .auth-card::before {
    background-image: url('data:image/svg+xml,<svg width="280" height="320" viewBox="0 0 280 320" xmlns="http://www.w3.org/2000/svg"><defs><radialGradient id="cyberpunkGrad" cx="50%" cy="30%"><stop offset="0%" stop-color="%23ff6b35"/><stop offset="50%" stop-color="%23e55d32"/><stop offset="100%" stop-color="%237209b7"/></radialGradient><filter id="neonGlow"><feGaussianBlur stdDeviation="2" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><circle cx="140" cy="160" r="120" fill="url(%23cyberpunkGrad)" stroke="%237209b7" stroke-width="4" filter="url(%23neonGlow)"/><path d="M20 160 L20 145 L35 145 L35 130 L50 130 L50 145 L65 145 L65 130 L80 130 L80 145 L95 145 L95 130 L110 130 L110 145 L125 145 L125 130 L140 130 L140 145 L155 145 L155 130 L170 130 L170 145 L185 145 L185 130 L200 130 L200 145 L215 145 L215 130 L230 130 L230 145 L245 145 L245 130 L260 130 L260 145 L260 160 A120 120 0 0 1 20 160 Z" fill="%23ff6b35" stroke="%237209b7" stroke-width="2" filter="url(%23neonGlow)"/><circle cx="140" cy="240" r="25" fill="%232a0845" stroke="%23ff6b35" stroke-width="3" filter="url(%23neonGlow)"/><rect x="120" y="180" width="40" height="15" fill="%2300ffff" opacity="0.7"/><rect x="125" y="200" width="30" height="10" fill="%23ff6b35" opacity="0.8"/></svg>');
  }
  
  .auth-submit-btn {
    background: linear-gradient(135deg, #ff6b35 0%, #7209b7 100%);
    box-shadow: 0 4px 15px rgba(#ff6b35, 0.3), 0 0 20px rgba(#7209b7, 0.2);
    border: 2px solid transparent;
    background-clip: padding-box;
    
    &:hover {
      background: linear-gradient(135deg, lighten(#ff6b35, 10%) 0%, lighten(#7209b7, 10%) 100%);
      box-shadow: 0 8px 25px rgba(#ff6b35, 0.4), 0 0 30px rgba(#7209b7, 0.3);
      transform: translateY(-2px) scale(1.02);
    }
  }
  
  .auth-card-body {
    .form-group, .mb-3 {
      input:focus {
        border-color: #ff6b35;
        box-shadow: 0 0 0 3px rgba(#ff6b35, 0.2), 0 0 15px rgba(#7209b7, 0.1);
      }
    }
    
    .form-check input[type="checkbox"] {
      accent-color: #ff6b35;
    }
  }
  
  .auth-links a {
    color: #ff6b35;
    text-shadow: 0 0 5px rgba(#ff6b35, 0.3);
    
    &:hover {
      color: lighten(#ff6b35, 10%);
      text-shadow: 0 0 10px rgba(#ff6b35, 0.5);
    }
  }
  
  // Effet n√©on sur l'overlay pour le th√®me dystopique
  .auth-card::after {
    background: rgba(42, 8, 69, 0.9);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(#ff6b35, 0.3);
  }
}
